/*! ng-carousel by Adam Timberlake <adam.timberlake@gmail.com> created on 2014-09-23 */
!function(a,b,c){"use strict";var d=a.module("ngRoundabout",[]).run(function(){a.isDefined(c)&&c.addTest("preserve3d",c.testAllProps("transformStyle","preserve-3d"))});d.constant("carouselOptions",{DIMENSION_WIDTH:250,DIMENSION_HEIGHT:300,DIMENSION_SPACING:10,PERSPECTIVE:1e3,BACKFACE_VISIBILITY:"hidden",MAINTAIN_ASPECT_RATIO:!1,FIGURE_PARTIAL_PATH:"partials/carousel.html"}),d.directive("carousel",["carouselOptions",function(d){return{restrict:"EA",require:"ngModel",template:'<section class="carousel-container"><figure ng-repeat="model in collection" ng-include="partial">{{applyFigureElementStyles($index)}}</figure></section>',scope:{collection:"=ngModel"},controller:["$scope",function(b){b.currentDimensionWidth=0,b.memorisedOptions=!1,b.originalCount=0,b.partial=d.FIGURE_PARTIAL_PATH,b.applyBaseElementStyles=function(a){return a.css({width:d.DIMENSION_WIDTH+"px",height:d.DIMENSION_HEIGHT+"px",display:"block",position:"relative",perspective:d.PERSPECTIVE+"px"})},b.applyContainerElementStyles=function(a,b){a.css({width:"100%",height:"100%",position:"absolute",transform:"translateZ(-"+b+"px) rotateY(0deg)",transformStyle:"preserve-3d"})},b.applyFigureElementStyles=function(c){var e=a.element(b.baseElement.find("figure")[c]),f=b.dimensionDegree*c;e.css({width:b.currentDimensionWidth-d.DIMENSION_SPACING+"px",height:d.DIMENSION_HEIGHT+"px",display:"block",position:"absolute",transform:"rotateY("+f+"deg) translateZ("+b.translateZ+"px)",backfaceVisibility:d.BACKFACE_VISIBILITY})},b.supports3DTransforms=function(){return a.isDefined(c)?!c.preserve3d:null},b.applyContainerElementOffset=function(a){a.css({left:"-"+(b.currentDimensionWidth-d.DIMENSION_WIDTH)/2+"px"})}}],link:function(c,e){c.currentDimensionWidth=d.DIMENSION_WIDTH,c.$watchCollection("collection",function(){if(0!==c.collection.length){var f=a.element(e.find("section")[0]),g=c.collection.length,h=360/g,i=d.DIMENSION_WIDTH/2,j=b.round(i/b.tan(b.PI/g));c.translateZ=j,c.baseElement=e,c.dimensionDegree=h,c.memorisedOptions||(c.originalCount=c.collection.length,c.memorisedOptions=!0,c.originalTranslateZ=j),c.applyBaseElementStyles(e),c.applyContainerElementStyles(f,j),d.MAINTAIN_ASPECT_RATIO&&(c.translateZ=c.originalTranslateZ,c.currentDimensionWidth=d.DIMENSION_WIDTH*c.originalCount/g,c.applyContainerElementOffset(f))}})}}}])}(window.angular,window.Math,window.Modernizr);