/*! ng-carousel by Adam Timberlake <adam.timberlake@gmail.com> created on 2014-09-21 */
!function(a,b,c){"use strict";var d=b.module("ngCarousel",[]).run(function(){c.addTest("preserve3d",c.testAllProps("transformStyle","preserve-3d"))});d.constant("carouselOptions",{DIMENSION_WIDTH:250,DIMENSION_HEIGHT:300,DIMENSION_SPACING:10,PERSPECTIVE:1e3,BACKFACE_VISIBILITY:"hidden",MAINTAIN_ASPECT_RATIO:!1,FIGURE_PARTIAL_PATH:"figure.html"}),d.directive("carousel",["carouselOptions",function(d){return{restrict:"EA",require:"ngModel",template:'<section class="carousel-container"><figure ng-repeat="model in collection" ng-include="partial">{{applyFigureElementStyles($index)}}</figure></section>',scope:{collection:"=ngModel"},controller:["$scope",function(a){a.currentDimensionWidth=0,a.memorisedOptions=!1,a.originalCount=0,a.partial=d.FIGURE_PARTIAL_PATH,a.applyBaseElementStyles=function(a){a.css({width:d.DIMENSION_WIDTH+"px",height:d.DIMENSION_HEIGHT+"px",display:"block",position:"relative",perspective:d.PERSPECTIVE+"px"})},a.applyContainerElementStyles=function(a,b){a.css({width:"100%",height:"100%",position:"absolute",transform:"translateZ(-"+b+"px) rotateY(0deg)",transformStyle:"preserve-3d"})},a.applyFigureElementStyles=function(c){var e=b.element(a.baseElement.find("figure")[c]),f=a.dimensionDegree*c;e.css({width:a.currentDimensionWidth-d.DIMENSION_SPACING+"px",height:d.DIMENSION_HEIGHT+"px",display:"block",position:"absolute",transform:"rotateY("+f+"deg) translateZ("+a.translateZ+"px)",backfaceVisibility:d.BACKFACE_VISIBILITY})},a.supports3DTransforms=function(){return!c.preserve3d},a.applyContainerElementOffset=function(b){b.css({left:"-"+(a.currentDimensionWidth-d.DIMENSION_WIDTH)/2+"px"})}}],link:function(c,e){c.currentDimensionWidth=d.DIMENSION_WIDTH,c.$watch("collection",function(){if(0!==c.collection.length){var f=b.element(e.find("section")[0]),g=c.collection.length,h=360/g,i=d.DIMENSION_WIDTH/2,j=a.round(i/a.tan(a.PI/g));c.translateZ=j,c.baseElement=e,c.dimensionDegree=h,c.memorisedOptions||(c.originalCount=c.collection.length,c.memorisedOptions=!0,c.originalTranslateZ=j),c.applyBaseElementStyles(e),c.applyContainerElementStyles(f,j),d.MAINTAIN_ASPECT_RATIO&&(c.translateZ=c.originalTranslateZ,c.currentDimensionWidth=d.DIMENSION_WIDTH*c.originalCount/g,c.applyContainerElementOffset(f))}},!0)}}}])}(window.Math,window.angular,window.Modernizr);